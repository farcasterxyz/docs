# アーキテクチャ

Farcasterは、アイデンティティをオンチェーンに、データをオフチェーンに保存するハイブリッドアーキテクチャを持っています。

![アーキテクチャ](/assets/architecture.png)

## オンチェーン

Farcasterのオンチェーンシステムは[OP Mainnetの契約](./contracts.md)として実装されています。セキュリティと一貫性が重要な場合にのみオンチェーンでアクションが実行されます。コストを削減し、パフォーマンスを向上させるために、オンチェーンアクションの使用は最小限に抑えられています。

オンチェーンで実行されるアクションはごくわずかで、以下を含みます：

- [アカウント](../what-is-farcaster/accounts.md)の作成。\n- データを[保存する](../what-is-farcaster/messages.md#storage)ための料金の支払い。\n- [接続されたアプリ](../what-is-farcaster/apps.md#connected-apps)のためのアカウントキーの追加。

## オフチェーン

Farcasterのオフチェーンシステムは、ユーザーデータを保存する[ハブ](./hubs.md)と呼ばれるサーバーのピアツーピアネットワークです。ユーザーのアクションの大部分はオフチェーンで実行されます。これには以下が含まれます：

- 新しい公開メッセージの投稿。\n- 他のユーザーのフォロー。\n- 投稿へのリアクション。\n- プロフィール画像の更新。

パフォーマンスとコストが重要な場合にアクションはオフチェーンで実行されます。一貫性が厳密な要件でない場合、オフチェーンアクションの使用が一般的に推奨されます。オフチェーンシステムはオンチェーンシステムからの署名に依存することでセキュリティを確保します。